import { useState } from 'react';
import { Modal, TextField, Button, Box} from '@mui/material';
import EmailIcon from '@mui/icons-material/Email';
import SendIcon from '@mui/icons-material/Send';

const Contact = () => {
  const [firstName, setFirstName] = useState('');
  const [lastName, setLastName] = useState('');
  const [email, setEmail] = useState('');
  const [message, setMessage] = useState('');
  const [open, setOpen] = useState(false);

  const handleSubmit = async (e) => {
    e.preventDefault();

    const data = { firstName, lastName, email, message };
    console.log(data);
    try {
      const response = await fetch('/api/contact', {
        method: 'POST',
        headers: {
          'Content-Type': 'application/json',
        },
        body: JSON.stringify(data),
      });

      if (response.ok) {
        // Handle successful data submission
        console.log('Contact data saved!');
        setFirstName('');
        setLastName('');
        setEmail('');
        setMessage('');
      } else {
        // Handle data submission error
        console.log('Error saving contact data, error in the component!');
      }
    } catch (error) {
      console.error('Error:', error);
    }
  };

  const modalStyle = {
    position: 'absolute',
    top: '50%',
    left: '50%',
    transform: 'translate(-50%, -50%)',
    width: 400,
    bgcolor: '#ffffff', // Background color (white in this example)
    boxShadow: '0px 4px 10px rgba(0, 0, 0, 0.1)', // Box shadow
    p: 4,
    borderRadius: '8px',
    fontFamily: 'Quicksand', // Change font to QuickSand
  };

  return (
    <div className="absolute top-[6386px] left-[0px] w-[1512px] h-[1031px] text-left text-lg text-black font-quicksand" data-scroll-to="contactContainer">
      <div className="absolute top-[0px] left-[0px] w-[1512px] h-[1031px]">
        <div className="absolute top-[0px] left-[0px] bg-white w-[1512px] h-[1031px]" />
        <div className="absolute top-[33px] left-[36px] w-[1440px] h-[965px]">
          <div className="absolute top-[30px] left-[0px] w-[399px] h-[905px]">
            <div className="absolute top-[0px] left-[0px] w-[399px] h-[442px]">
              <img className="absolute top-[0px] left-[0px] w-[41px] h-[39.81px]" alt="" src="/chat.svg" />
              <img className="absolute top-[168px] left-[1px] w-10 h-10 overflow-hidden" alt="" src="/meeting.svg" />
              <img className="absolute top-[290px] left-[0px] w-[45px] h-[45px] overflow-hidden" alt="" src="/quote.svg" />
              <b className="absolute top-[0px] left-[66px] inline-block w-[117px] h-[17px]">Chat With Me</b>
              <b className="absolute top-[171px] left-[66px] inline-block w-[171px] h-[17px]">Schedule a Meeting</b>
              <b className="absolute top-[294px] left-[66px] inline-block w-[107px] h-[17px]">Get a Quote</b>
              <div className="absolute top-[30px] left-[67px] text-base font-poppins inline-block w-[332px] h-[94px]">Live chat is directly integrated into the site, if I am available, I will reply then and there, and if not, then I will contact you via email.</div>
              <div className="absolute top-[201px] left-[67px] text-base font-poppins inline-block w-[332px] h-[45px]">You can schedule a meeting with me at times suitable for both of us.</div>
              <div className="absolute top-[326px] left-[67px] text-base font-poppins inline-block w-[332px] h-[116px]">You can get an automated, roughly estimated quote from my quote generator tool and I will get back to you via email with further questions or a final quote.</div>
            </div>
            <div className="absolute top-[851px] left-[0px] w-[284px] h-[54px]">
              <div className="absolute top-[6px] left-[6px] rounded-8xs bg-gainsboro w-[49px] h-12" />
              <div className="absolute top-[6px] left-[82px] rounded-8xs bg-gainsboro w-[49px] h-12" />
              <div className="absolute top-[6px] left-[159px] rounded-8xs bg-gainsboro w-[49px] h-12" />
              <div className="absolute top-[6px] left-[235px] rounded-8xs bg-gainsboro w-[49px] h-12" />
              <div className="absolute top-[0px] left-[0px] rounded-8xs bg-white box-border w-[49px] h-12 border-[1px] border-solid border-black" />
              <div className="absolute top-[0px] left-[76px] rounded-8xs bg-white box-border w-[49px] h-12 border-[1px] border-solid border-black" />
              <div className="absolute top-[0px] left-[153px] rounded-8xs bg-white box-border w-[49px] h-12 border-[1px] border-solid border-black" />
              <div className="absolute top-[0px] left-[229px] rounded-8xs bg-white box-border w-[49px] h-12 border-[1px] border-solid border-black" />
              <a className="[text-decoration:none] absolute top-[2px] left-[2px] w-11 h-11 overflow-hidden" href="https://www.linkedin.com/" target="_blank">
                <img className="absolute h-3/4 w-9/12 top-[12.5%] right-[12.5%] bottom-[12.5%] left-[12.5%] max-w-full overflow-hidden max-h-full" alt="" src="/vector.svg" />
              </a>
              <a className="[text-decoration:none] absolute top-[7px] left-[84px] w-[34px] h-[34px] overflow-hidden" href="https://www.facebook.com/" target="_blank">
                <img className="absolute h-[100.01%] w-[100.01%] top-[0%] right-[-0.01%] bottom-[-0.01%] left-[0%] max-w-full overflow-hidden max-h-full" alt="" src="/vector1.svg" />
              </a>
              <a className="[text-decoration:none] absolute top-[6px] left-[159px] w-9 h-9 overflow-hidden" href="https://www.instagram.com/" target="_blank">
                <img className="absolute h-[83.33%] w-[83.33%] top-[8.33%] right-[8.33%] bottom-[8.33%] left-[8.33%] max-w-full overflow-hidden max-h-full" alt="" src="/vector2.svg" />
              </a>
              <a className="[text-decoration:none] absolute top-[6px] left-[236px] w-9 h-9 overflow-hidden" href="https://www.github.com/" target="_blank">
                <img className="absolute h-[81.31%] w-[83.33%] top-[8.33%] right-[8.33%] bottom-[10.35%] left-[8.33%] max-w-full overflow-hidden max-h-full" alt="" src="/vector3.svg" />
              </a>
            </div>
          </div>
          <div className="absolute top-[0px] left-[554px] w-[886px] h-[965px] text-29xl text-gray-100">
            <div className="absolute top-[0px] left-[0px] rounded-lg bg-lavender w-[886px] h-[965px]" />
            <b className="absolute top-[121px] left-[40px] inline-block w-[415px] h-28">
              <p className="m-0">Wanna Say Hi?</p>
              <p className="m-0">You are Welcome.</p>
            </b>
            <img className="absolute top-[48px] left-[40px] w-[43px] h-[43px] overflow-hidden" alt="" src="/mdihandwave.svg" />
            <form onSubmit={handleSubmit}>
              <input
                className="bg-[transparent] absolute top-[298px] left-[45px] rounded-8xs box-border w-96 h-[50px] border-[1px] border-solid border-black"
                type="text"
                placeholder="First Name"
                value={firstName}
                onChange={(e) => setFirstName(e.target.value)}
              />
              <input
                className="bg-[transparent] absolute top-[376px] left-[45px] rounded-8xs box-border w-[792px] h-[50px] border-[1px] border-solid border-black"
                type="text"
                placeholder="Email"
                value={email}
                onChange={(e) => setEmail(e.target.value)}
              />
              <input
                className="bg-[transparent] absolute top-[476px] left-[45px] rounded-3xs box-border w-[792px] h-[341px] border-[1px] border-solid border-black"
                type="text"
                placeholder="Message..."
                value={message}
                onChange={(e) => setMessage(e.target.value)}
              />
              <input
                className="bg-[transparent] absolute top-[298px] left-[453px] rounded-8xs box-border w-96 h-[50px] border-[1px] border-solid border-black"
                type="text"
                placeholder="Last Name"
                value={lastName}
                onChange={(e) => setLastName(e.target.value)}
              />
              <button className="cursor-pointer [border:none] p-0 bg-[transparent] absolute top-[858px] left-[706px] w-[131px] h-[50px]">
                <div className="absolute top-[0px] left-[0px] rounded-8xs bg-gray-200 w-[131px] h-[50px]" />
                <b className="absolute top-[13px] left-[30px] text-base inline-block font-poppins text-whitesmoke-200 text-left w-11 h-[23px]">SEND</b>
                <img className="absolute top-[17px] left-[86px] w-4 h-4 overflow-hidden" alt="" src="/bisendfill.svg" />
              </button>
            </form>
          </div>
        </div>
      </div>
      <button
        className="cursor-pointer [border:none] p-0 bg-[transparent] absolute top-[55px] left-[36px] w-[393px] h-36 overflow-hidden"
        onClick={() => setOpen(true)}
      />
      <button
        className="cursor-pointer [border:none] p-0 bg-[transparent] absolute top-[215px] left-[36px] w-[404px] h-28 overflow-hidden"
        onClick={() => setOpen(true)}
      />
      <button
        className="cursor-pointer [border:none] p-0 bg-[transparent] absolute top-[353px] left-[39px] w-[421px] h-[173px] overflow-hidden"
        onClick={() => setOpen(true)}
      />

      {/* Modal */}
      <Modal open={open} onClose={() => setOpen(false)}>
        <Box sx={modalStyle}>
          <h2><EmailIcon sx={{ fontSize: 30, marginRight: '10px', marginTop: '5px' }} />
          Send Message</h2>
          <form onSubmit={handleSubmit}>
            <TextField
              label="First Name"
              value={firstName}
              onChange={(e) => setFirstName(e.target.value)}
              fullWidth
              margin="normal"
              variant="outlined"
            />
            <TextField
              label="Last Name"
              value={lastName}
              onChange={(e) => setLastName(e.target.value)}
              fullWidth
              margin="normal"
              variant="outlined"
            />
            <TextField
              label="Email"
              value={email}
              onChange={(e) => setEmail(e.target.value)}
              fullWidth
              margin="normal"
              variant="outlined"
            />
            <TextField
              label="Message"
              value={message}
              onChange={(e) => setMessage(e.target.value)}
              multiline
              rows={4}
              fullWidth
              margin="normal"
              variant="outlined"
            />
            <Button type="submit" variant="contained" color="primary">
            <SendIcon sx={{ marginRight: '8px' }} />
              Send
            </Button>
          </form>
        </Box>
      </Modal>
    </div>
  );
};


export default Contact;
